<!DOCTYPE html>
<html>
<head>
<title>Doctor Panel</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="navbar">Hospital Monitoring Panel</div>

<table id="ptable">
<tr>
<th>Patient</th>
<th>HR</th>
<th>SpOâ‚‚</th>
<th>Temp</th>
<th>Status</th>
</tr>
</table>

<audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyAt-EWEfo4yLAqYnKs3HxIcL4ALg_y4RLo",
  databaseURL: "https://smarthealthcare-iot-default-rtdb.firebaseio.com",
  projectId: "smarthealthcare-iot"
});

firebase.database().ref("patients").on("value", snapshot => {
  const patients = snapshot.val();
  const table = document.getElementById("ptable");

  table.innerHTML = `
    <tr>
      <th>Patient</th>
      <th>HR</th>
      <th>SpOâ‚‚</th>
      <th>Temp</th>
      <th>Status</th>
    </tr>`;

  let alarm = false;

  for (let name in patients) {
    const p = patients[name];
    const critical = p.heartRate > 120 || p.spo2 < 92 || p.temp > 38;

    if (critical) alarm = true;

    table.innerHTML += `
      <tr style="background:${critical ? '#ffd6d6' : '#eaffea'}">
        <td>${name}</td>
        <td>${p.heartRate}</td>
        <td>${p.spo2}%</td>
        <td>${p.temp}Â°C</td>
        <td>${critical ? 'ðŸš¨ CRITICAL' : 'NORMAL'}</td>
      </tr>`;
  }

  if (alarm) document.getElementById("alarmSound").play();
});
</script>

</body>
</html>
